<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/lib/core/BaseSound.js - javascript-sound-models</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="javascript-sound-models"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.4.7</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/BaseSound.html">BaseSound</a></li>
            
                <li><a href="../classes/SPAudioParam.html">SPAudioParam</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/lib/core/BaseSound.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**

Base class for all sounds. 

Pseudo AudioNode class the encapsulates basic functionality of creating a AudioContext and passing in audio file buffer.

@class BaseSound
@constructor
@param {AudioContext} audioContext
**/
define([&#x27;utils/AudioContextMonkeyPatch.js&#x27;], function() {
    &#x27;use strict&#x27;;

    function BaseSound(audioContext) {
        /**
        Define one audioContext from Web Audio API&#x27;s AudioContext class.

        @property audioContext
        @type AudioContext
        @default audioContext
        **/
        if (typeof audioContext === &quot;undefined&quot;) {
            // Need to check for prefixes for AudioContext
            this.audioContext = new AudioContext();
            console.log(&quot;new audioContext&quot;);
        } else {
            this.audioContext = audioContext;
            console.log(&quot;current ac&quot;);
        }
        /**
        Number of inputs

        @property numberOfInputs
        @type Number
        @default 1
        **/
        this.numberOfInputs = 1; // Defaults to 1
        /**
        Number of outputs

        @property numberOfOutputs
        @type Number
        @default 1
        **/
        this.numberOfOutputs = 1; // Defaults to 1
        /**
        Release Gain Node

        @property releaseGainNode
        @type GainNode
        **/
        this.releaseGainNode = this.audioContext.createGain();
        /**
        Fading time in (seconds)
        @constant FADE_TIME
        @default 0.5 (seconds)
        **/
        this.FADE_TIME = 0.5; // Seconds
        /**
        Checks if the sound is currently playing.

        @property isPlaying
        @type boolean
        @default false
        **/
        this.isPlaying = false;
        /** 
        Temp: Create a sine wave oscillator buffer as a temporary source.
        Will be replaced by FileReader and parse in an AudioBuffer

        @property bufferSource
        @type Object
        **/
        this.bufferSource = this.audioContext.createOscillator();
        // Connects source to release gain node
        this.bufferSource.connect(this.releaseGainNode);
        // Connects release gain node to the destination node
        this.connect(this.audioContext.destination);
    }

    /**
    Connects release Gain Node to an AudioNode or AudioParam.

	@method connect
	@return null
    @param {Object} output Connects to an AudioNode or AudioParam.
	**/
    BaseSound.prototype.connect = function(output) {
        console.log(&quot;connects to release Gain Node&quot;);
        this.releaseGainNode.connect(output);
    };
    /**
    Disconnects (release) Gain Node from an AudioNode or AudioParam.

    @method disconnect
    @return null
    @param {Object} output Takes in an AudioNode or AudioParam.
    **/
    BaseSound.prototype.disconnect = function(output) {
        console.log(&quot;disconnect from Gain Node&quot;);
        this.releaseGainNode.disconnect(output);
    };
    /**
    Start audio at this current time.

    @method start
    @return null
    @param {Number} currTime Time in (seconds) that audio will start.
    **/
    BaseSound.prototype.start = function(currTime) {
        console.log(&quot;start the buffer&quot;);
        this.bufferSource.start(currTime);
        this.isPlaying = true;
    };
    /**
    Stop audio.

    @method stop
    @return null
    @param {Number} currTime Time in (seconds) that audio will stop.
    **/
    BaseSound.prototype.stop = function(currTime) {
        console.log(&quot;stop the buffer&quot;);
        this.bufferSource.stop(currTime);
        this.isPlaying = false;
    };
    /**
    Linearly ramp down the gain of the audio in time (seconds) to 0.

    @method release
    @return null
    @param {Number} fadeTime Amount of time it takes for linear ramp down to happen.
    **/
    BaseSound.prototype.release = function(fadeTime) {
        if (typeof fadeTime === &quot;undefined&quot;) {
            fadeTime = this.FADE_TIME;
        }
        this.releaseGainNode.gain.linearRampToValueAtTime(0, this.audioContext.currentTime + fadeTime);
        console.log(&quot;release: linear ramp down after &quot; + fadeTime + &quot; seconds.&quot;);

        //this.stop(this.audioContext + fadeTime + 5);
    };
    /**
    Play sound after connecting the (master) gain node to the destination node.

    @method play
    @return null
    **/
    BaseSound.prototype.play = function() {
        console.log(&quot;play sound&quot;);
        this.start(0);
    };

    // Return constructor function
    return BaseSound;

});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
