<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/lib/core/BaseSound.js - javascript-sound-models</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="javascript-sound-models"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.4.7</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/BaseSound.html">BaseSound</a></li>
            
                <li><a href="../classes/Envelope.html">Envelope</a></li>
            
                <li><a href="../classes/FileReader.html">FileReader</a></li>
            
                <li><a href="../classes/LoadFile.html">LoadFile</a></li>
            
                <li><a href="../classes/LoopMarker.html">LoopMarker</a></li>
            
                <li><a href="../classes/SPAudioParam.html">SPAudioParam</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/FileReader.html">FileReader</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/lib/core/BaseSound.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**

Base class for all sounds.

Pseudo AudioNode class the encapsulates basic functionality of an Audio Node. 
This is where AudioContext will be created and all sounds will be using this AudioContext.

@class BaseSound
@constructor
@param {AudioContext} context
**/
define( [ &#x27;core/AudioContextMonkeyPatch&#x27; ], function () {
    &#x27;use strict&#x27;;

    function BaseSound( context ) {
        /**
        Define one audioContext from Web Audio API&#x27;s AudioContext class.

        @property audioContext
        @type AudioContext
        @default audioContext
        **/
        if ( typeof context === &quot;undefined&quot; ) {
            this.audioContext = new AudioContext();
            console.log( &quot;new audioContext&quot; );
        } else {
            this.audioContext = context;
            console.log( &quot;current ac&quot; );
        }
        /**
        Number of inputs

        @property numberOfInputs
        @type Number
        @default 1
        **/
        this.numberOfInputs = 1; // Defaults to 1
        /**
        Number of outputs

        @property numberOfOutputs
        @type Number
        @default 1
        **/
        this.numberOfOutputs = 1; // Defaults to 1
        /**
        Release Gain Node

        @property releaseGainNode
        @type GainNode
        **/
        this.releaseGainNode = this.audioContext.createGain();
        /**
        Fading time in (seconds)

        @property FADE_TIME
        @constant FADE_TIME
        @default 0.5 (seconds)
        **/
        this.FADE_TIME = 0.5;
        /**
        Padding time in (seconds) after FADE_TIME to allow sound to fade out smoothly.

        @property FADE_TIME_PAD
        @constant FADE_TIME_PAD
        @default 1 (seconds)
        **/
        this.FADE_TIME_PAD = 1;
        /**
        Checks if the sound is currently playing.

        @property isPlaying
        @type boolean
        @default false
        **/
        this.isPlaying = false;
        /**
        Removed bufferSource property from BaseSound
        **/
    }

    /**
    Connects release Gain Node to an AudioNode or AudioParam.

	@method connect
	@return null
    @param {Object} output Connects to an AudioNode or AudioParam.
	**/
    BaseSound.prototype.connect = function ( output ) {
        console.log( &quot;connects to release Gain Node&quot; );
        this.releaseGainNode.connect( output );
    };
    /**
    Disconnects release Gain Node from an AudioNode or AudioParam.

    @method disconnect
    @return null
    @param {Object} output Takes in an AudioNode or AudioParam.
    **/
    BaseSound.prototype.disconnect = function ( output ) {
        console.log( &quot;disconnect from Gain Node&quot; );
        this.releaseGainNode.disconnect( output );
    };
    /**
    Start audio at this current time. Abstract method. Override this method when a buffer is defined. 

    @method start
    @return null
    @param {Number} currTime Time in (seconds) that audio will start.
    **/
    BaseSound.prototype.start = function ( currTime ) {
        this.isPlaying = true;
        console.log( &quot;start the buffer &quot; + this.isPlaying );
    };
    /**
    Stop audio at this current time. Abstract method. Override this method when a buffer is defined. 

    @method stop
    @return null
    @param {Number} currTime Time in (seconds) that audio will stop.
    **/
    BaseSound.prototype.stop = function ( currTime ) {
        // This boolean is not accurate. Need a better way track if the actual audio is still playing.
        this.isPlaying = false;
        console.log( &quot;stop the buffer &quot; + this.isPlaying );
    };
    /**
    Linearly ramp down the gain of the audio in time (seconds) to 0.

    @method release
    @return null
    @param {Number} fadeTime Amount of time it takes for linear ramp down to happen.
    **/
    BaseSound.prototype.release = function ( fadeTime ) {
        if ( typeof fadeTime === &quot;undefined&quot; ) {
            fadeTime = this.FADE_TIME;
        }
        // Clamp the current gain value at this point of time to prevent sudden jumps.
        this.releaseGainNode.gain.setValueAtTime( this.releaseGainNode.gain.value, this.audioContext.currentTime );
        // Now there won&#x27;t be any glitch and there is a smooth ramp down.
        this.releaseGainNode.gain.linearRampToValueAtTime( 0, this.audioContext.currentTime + fadeTime );
        console.log( &quot;release: linear ramp down after &quot; + fadeTime + &quot; seconds.&quot; );
        // Stops the sound after currentTime + fadeTime + FADE_TIME_PAD
        this.stop( this.audioContext.currentTime + fadeTime + this.FADE_TIME_PAD );
    };
    /**
    Play sound. Abstract method. Override this method when a buffer is defined. 

    @method play
    @return null
    **/
    BaseSound.prototype.play = function () {
        console.log( &quot;play sound&quot; );
    };
    /**
    Pause sound. Abstract method. Override this method when a buffer is defined. 

    @method pause
    @return null
    **/
    BaseSound.prototype.pause = function () {
        console.log( &quot;pause sound&quot; );
    };
    // Return constructor function
    return BaseSound;

} );

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
