/*javascript-sound-models - v0.4.0 - 2014-05-20 */ 
console.log("   ____                           __ \n" + "  / _____  ___ ___  ___ ___  ____/ /_\n" + " _\\ \\/ _ \\/ _ / _ \\/ _ / _ \\/ __/ __/\n" + "/___/\\___/_//_\\___/ .__\\___/_/  \\__/ \n" + "                 /_/                 \n" + "Hello Developer!\n" + "Thanks for using Sonoport Dynamic Sound Library.");

define("core/Config",[],function(){function e(){}return e.MAX_VOICES=8,e.NOMINAL_REFRESH_RATE=60,e.WINDOW_LENGTH=512,e}),define("core/AudioContextMonkeyPatch",[],function(){function e(e){e&&(e.setTargetAtTime||(e.setTargetAtTime=e.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext,AudioContext.prototype.hasOwnProperty("createGain")||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),AudioContext.prototype.hasOwnProperty("createDelay")||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),AudioContext.prototype.hasOwnProperty("createScriptProcessor")||(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var t=this.internal_createGain();return e(t.gain),t},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(t){var n=t?this.internal_createDelay(t):this.internal_createDelay();return e(n.delayTime),n},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();return t.start||(t.start=function(e,t,n){t||n?this.noteGrainOn(e,t,n):this.noteOn(e)}),t.stop||(t.stop=t.noteOff),e(t.playbackRate),t},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();return e(t.threshold),e(t.knee),e(t.ratio),e(t.reduction),e(t.attack),e(t.release),t},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();return e(t.frequency),e(t.detune),e(t.Q),e(t.gain),t},AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();return t.start||(t.start=t.noteOn),t.stop||(t.stop=t.noteOff),e(t.frequency),e(t.detune),t}))}),define("core/BaseSound",["core/AudioContextMonkeyPatch"],function(){function e(e){void 0===e||null===e?(console.log("Making a new AudioContext"),this.audioContext=new AudioContext):this.audioContext=e,this.numberOfInputs=0,this.numberOfOutputs=0,this.maxSources=0,this.releaseGainNode=this.audioContext.createGain(),this.isPlaying=!1,this.isInitialized=!1,this.inputNode=null,this.modelName="Model"}return e.prototype.connect=function(e,t,n){if(e instanceof AudioNode)this.releaseGainNode.connect(e,t,n);else{if(!(e.inputNode instanceof AudioNode))throw{name:"No Input Connection Exception",message:"Attempts to connect "+typeof t+" to "+typeof this,toString:function(){return this.name+": "+this.message}};this.releaseGainNode.connect(e.inputNode,t,n)}},e.prototype.disconnect=function(e){this.releaseGainNode.disconnect(e)},e.prototype.start=function(){this.isPlaying=!0},e.prototype.stop=function(e){this.isPlaying=!1,"undefined"==typeof e&&(e=0),this.releaseGainNode.gain.cancelScheduledValues(e)},e.prototype.release=function(e,t){if(this.isPlaying){var n=.5,o=1/this.audioContext.sampleRate;"undefined"==typeof e&&(e=this.audioContext.currentTime),t=t||n,this.releaseGainNode.gain.setValueAtTime(this.releaseGainNode.gain.value,e),this.releaseGainNode.gain.linearRampToValueAtTime(0,e+t),this.stop(e+t+o)}},e.prototype.play=function(){this.start(0)},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.listParams=function(){var e=[];for(var t in this){var n=this[t];n&&n.hasOwnProperty("value")&&n.hasOwnProperty("minValue")&&n.hasOwnProperty("maxValue")&&e.push(n)}return e},e}),define("core/SPAudioParam",[],function(){function e(e,t,n,o,r,a,i,u){var s,c=1e-4,f=500,l=0;if(this.defaultValue=null,this.maxValue=0,this.minValue=0,this.name="",Object.defineProperty(this,"value",{enumerable:!0,set:function(e){if(typeof e!=typeof o)throw{name:"Incorrect value type Exception",message:"Attempt to set a "+typeof o+" parameter to a "+typeof e+" value",toString:function(){return this.name+": "+this.message}};"number"==typeof e&&(e>n?(console.log(this.name+" clamping to max"),e=n):t>e&&(console.log(this.name+" clamping to min"),e=t)),"function"==typeof a&&(e=a(e)),"function"==typeof i&&u?i(r,e,u):r?r instanceof AudioParam?r.value=e:r instanceof Array&&r.forEach(function(t){t.value=e}):window.clearInterval(s),l=e},get:function(){if(r){if(r instanceof AudioParam)return r.value;if(r instanceof Array)return r[0].value}return l}}),r&&(r instanceof AudioParam||r instanceof Array)){var p=r[0]||r;this.defaultValue=p.defaultValue,this.minValue=p.minValue,this.maxValue=p.maxValue,this.value=p.defaultValue,this.name=p.name}e&&(this.name=e),"undefined"!=typeof o&&(this.defaultValue=o,this.value=o),"undefined"!=typeof t&&(this.minValue=t),"undefined"!=typeof n&&(this.maxValue=n),this.setValueAtTime=function(e,t){if("function"==typeof a&&(e=a(e)),r)r instanceof AudioParam?r.setValueAtTime(e,t):r instanceof Array&&r.forEach(function(n){n.setValueAtTime(e,t)});else{var n=this,o=t-u.currentTime;window.setTimeout(function(){n.value=e},1e3*o)}},this.setTargetAtTime=function(e,t,n){if("function"==typeof a&&(e=a(e)),r)r instanceof AudioParam?r.setTargetAtTime(e,t,n):r instanceof Array&&r.forEach(function(o){o.setTargetAtTime(e,t,n)});else{var o=this,i=o.value,l=u.currentTime;s=window.setInterval(function(){u.currentTime>=t&&(o.value=e+(i-e)*Math.exp(-(u.currentTime-l)/n),Math.abs(o.value-e)<c&&window.clearInterval(s))},f)}},this.setValueCurveAtTime=function(e,t,n){if("function"==typeof a)for(var o=0;o<e.length;o++)e[o]=a(e[o]);if(r)r instanceof AudioParam?r.setValueCurveAtTime(e,t,n):r instanceof Array&&r.forEach(function(o){o.setValueCurveAtTime(e,t,n)});else{var i=this,c=u.currentTime;s=window.setInterval(function(){if(u.currentTime>=t){var o=Math.floor(e.length*(u.currentTime-c)/n);o<e.length?i.value=e[o]:window.clearInterval(s)}},f)}},this.exponentialRampToValueAtTime=function(e,t){if("function"==typeof a&&(e=a(e)),r)r instanceof AudioParam?r.exponentialRampToValueAtTime(e,t):r instanceof Array&&r.forEach(function(n){n.exponentialRampToValueAtTime(e,t)});else{var n=this,o=n.value,i=u.currentTime;0===o&&(o=.001),s=window.setInterval(function(){var r=(u.currentTime-i)/(t-i);n.value=o*Math.pow(e/o,r),u.currentTime>=t&&window.clearInterval(s)},f)}},this.linearRampToValueAtTime=function(e,t){if("function"==typeof a&&(e=a(e)),r)r instanceof AudioParam?r.linearRampToValueAtTime(e,t):r instanceof Array&&r.forEach(function(n){n.linearRampToValueAtTime(e,t)});else{var n=this,o=n.value,i=u.currentTime;s=window.setInterval(function(){var r=(u.currentTime-i)/(t-i);n.value=o+(e-o)*r,u.currentTime>=t&&window.clearInterval(s)},f)}},this.cancelScheduledValues=function(e){r?r instanceof AudioParam?r.cancelScheduledValues(e):r instanceof Array&&r.forEach(function(t){t.cancelScheduledValues(e)}):window.clearInterval(s)}}return e.createPsuedoParam=function(t,n,o,r,a){return new e(t,n,o,r,null,null,null,a)},e}),define("core/DetectLoopMarkers",[],function(){function e(e){var t=0,n=0,o=5e3,r=.5,a=2e4,i=.01,u=1024,s=16,c=[],f=0,l=function(e,t){for(var n=0,o=t+s;t+s+u>o;++o)n+=Math.abs(e[o]);return i>n/u},p=function(e){return function(t,n,o){var a;return a=o%2===0?n[e]>r:n[e]<-r,t&&a}},d=function(e){var r=null,i=null;t=0,n=f;for(var u=0;null===r&&f>u&&a>u;){if(e.reduce(p(u),!0)&&(1!==e.length||l(e[0],u))){r=u;break}u++}for(u=f;null===i&&u>0&&a>f-u;){if(e.reduce(p(u),!0)){i=u;break}u--}return null!==r&&null!==i&&i>r+o?(t=r+o/2,n=i-o/2,!0):!1},h=function(e){return function(t,n){return t&&Math.abs(n[e])<i}},m=function(e){var o=!0;for(t=0;a>t&&f>t&&(o=e.reduce(h(t),!0));)t++;for(n=f;a>f-n&&n>0&&(o=e.reduce(h(n),!0));)n--;t>n&&(t=0,nLoopLength_=f)};f=e.length;for(var y=0;y<e.numberOfChannels;y++)c.push(new Float32Array(e.getChannelData(y)));return d(c)||m(c),{start:t,end:n}}return e}),define("core/FileLoader",["core/DetectLoopMarkers"],function(e){function t(n,o,r,a){function i(){var e=Object.prototype.toString.call(n),t=/[^.]+$/.exec(n);if("[object String]"===e){var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.addEventListener("progress",a,!1),o.onload=function(){u(o.response,t)},o.send()}else if("[object File]"===e){var r=new FileReader;r.addEventListener("progress",a,!1),r.onload=function(){u(r.result,t)},r.readAsArrayBuffer(n)}}function u(t,a){o.decodeAudioData(t,function(t){if(l=!0,s=t,c=0,f=s.length,"wav"!==a[0]){var n=e(s);n&&(c=n.start,f=n.end)}r&&"function"==typeof r&&r(!0)},function(){console.log("Error Decoding "+n),r&&"function"==typeof r&&r(!1)})}if(!(this instanceof t))throw new TypeError("FileLoader constructor cannot be called as a function.");var s,c=0,f=0,l=!1,p=function(e){var t=/^[0-9]+$/;return t.test(e)?!0:!1},d=function(e,t){if("undefined"==typeof t&&(t=s.length),!p(e))throw{name:"Incorrect parameter type Exception",message:"FileLoader getBuffer start parameter is not an integer",toString:function(){return this.name+": "+this.message}};if(!p(t))throw{name:"Incorrect parameter type Exception",message:"FileLoader getBuffer end parameter is not an integer",toString:function(){return this.name+": "+this.message}};if(e>t)throw{name:"Incorrect parameter type Exception",message:"FileLoader getBuffer start parameter should be smaller than end parameter",toString:function(){return this.name+": "+this.message}};if(e>f||c>e)throw{name:"Incorrect parameter type Exception",message:"FileLoader getBuffer start parameter should be within the buffer size : 0-"+s.length,toString:function(){return this.name+": "+this.message}};if(t>f||c>t)throw{name:"Incorrect parameter type Exception",message:"FileLoader getBuffer end parameter should be within the buffer size : 0-"+s.length,toString:function(){return this.name+": "+this.message}};for(var n=t-e,r=o.createBuffer(s.numberOfChannels,n,s.sampleRate),a=0;a<s.numberOfChannels;a++){var i=new Float32Array(s.getChannelData(a));r.getChannelData(a).set(i.subarray(e,t))}return r};this.getBuffer=function(e,t){return"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=f-c),d(c+e,c+t)},this.getRawBuffer=function(){return s},this.isLoaded=function(){return l},i()}return t}),define("core/MultiFileLoader",["core/FileLoader"],function(e){function t(t,n,o,r){function a(){var e=Object.prototype.toString.call(t);"[object Array]"===e?(c=t.length,t.forEach(function(e){i(e,u)})):void 0!==t&&null!==t&&(c=1,i(t,u))}function i(t,n){var o=Object.prototype.toString.call(t);if("[object String]"===o||"[object File]"===o)var a=new e(t,s.audioContext,function(e){e&&n(e,a.getBuffer())},function(e){r&&"function"==typeof r&&r(e,t)});else{if("[object AudioBuffer]"!==o)throw{name:"Incorrect Parameter type Exception",message:"Looper argument is not a URL or AudioBuffer",toString:function(){return this.name+": "+this.message}};n(!0,t)}}function u(e,t){c--,f.push(t),0===c&&o(e,f)}var s=this,c=0,f=[];a()}return t}),define("models/Scrubber",["core/Config","core/BaseSound","core/SPAudioParam","core/MultiFileLoader"],function(e,t,n,o){function r(a,i,u,s){function c(t){var n=Object.prototype.toString.call(t);if("[object Array]"===n&&t.length>1)throw{name:"Incorrect Parameter type Exception",message:"Extender only accepts a single sound as argument",toString:function(){return this.name+": "+this.message}};o.call(C,t,i,B,s),p=e.WINDOW_LENGTH,d=p/2,T=0,y=l(p,1);for(var r=0;p>r;r++)y[r]=.25*(1-Math.cos(2*Math.PI*(r+.5)/p));C.releaseGainNode.connect(C.audioContext.destination)}function f(e){if(C.isPlaying&&C.isInitialized)for(var t,n,o=e.outputBuffer.length;o>0;){if(T>0&&o>0){var r=Math.min(o,T);for(n=0;g>n;n++){var a=h[n].subarray(d-T,d-T+r);e.outputBuffer.getChannelData(n).set(a,e.outputBuffer.length-o)}o-=r,T-=r}if(o>0){var i,u=C.playPosition.value;if(Math.abs(b-u)*v>V*A)P=u,i=0;else{var s=I*P+(1-I)*u;i=(s-P)*v/d,P=s}for(b=u,t=0;p-d>t;t++)for(n=0;g>n;n++)h[n][t]=h[n][t+d];for(t=p-d;p>t;t++)for(n=0;g>n;n++)h[n][t]=0;for(t=0;p-d>t;t++)for(n=0;g>n;n++)m[n][t]=m[n][t+d];var c=0,f=0;for(t=0;p-d>t;t++){var l=0;for(n=0;g>n;n++)l+=m[n][t];l>f&&(c=t,f=l)}var x=parseInt(P*(v-p)),S=0,B=0;for(t=0;p>t;t++){var M=0,F=(x+t)%v;for(n=0;g>n;n++)M+=w[n][F];M>B&&(B=M,S=t)}var D=S-c;for(x+=D,t=0;p>t;t++){var L=(x+t)%v;for(0>L&&(L=0),n=0;g>n;n++)m[n][t]=w[n][L]}var G=C.noMotionFade.value,R=1;G&&Math.abs(i)<E&&(R=0),O=N*O+(1-N)*R;var _=C.muteOnReverse.value;for(0>i&&_&&(O=0),t=0;p>t;t++)for(n=0;g>n;n++)h[n][t]+=O*y[t]*m[n][t];T=d}}}function l(e,t){var n=[];(void 0===t||null===t)&&(t=1);for(var o=0;t>o;o++)n.push(new Float32Array(e));return n}if(!(this instanceof r))throw new TypeError("Scrubber constructor cannot be called as a function.");t.call(this,i),this.maxSources=1,this.numberOfInputs=1,this.numberOfOutputs=1,this.modelName="Scrubber";var p,d,h,m,y,v,g,A,x,C=this,w=[],T=0,b=0,P=0,O=0,S=u,V=1,I=.95,E=.05,N=.8,B=function(e,t){var n=t[0];v=n.length,g=n.numberOfChannels,A=n.sampleRate;for(var o=0;g>o;o++)w.push(n.getChannelData(o));x=C.audioContext.createScriptProcessor(256,0,g),x.onaudioprocess=f,x.connect(C.releaseGainNode),h=l(p,g),m=l(p,g),C.isInitialized=!0,"function"==typeof S&&S(e)};this.setSources=function(e,t){this.isInitialized=!1,S=t,c(e)},this.playPosition=n.createPsuedoParam("playPosition",0,1,0,this.audioContext),this.noMotionFade=n.createPsuedoParam("noMotionFade",!0,!1,!0,this.audioContext),this.muteOnReverse=n.createPsuedoParam("muteOnReverse",!0,!1,!0,this.audioContext),c(a)}return r.prototype=Object.create(t.prototype),r});